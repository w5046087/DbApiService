using DpApiServer.Core.UseLib.Http;
using DpApiServer.Core.UseLib.WeiXinLib.OpenPlatform.SendTemplateMsg.Model;
using Microsoft.Extensions.Caching.Memory;

namespace DpApiServer.Core.UseLib.WeiXinLib.OpenPlatform.SendTemplateMsg
{
    public class SendTempMessage 
    {

        //public SendTempMessage(SendRequest sendRequest, IMemoryCache memoryCache, IConfiguration configuration) : base(sendRequest, memoryCache, configuration)
        //{

        //}
        //public async Task<int> SendTemplateMsg(TemplateMsgEnum templateMsgEnum ,List<string> openidList, string first, string earnLevel, string? remark)
        //{

        //    if (openidList.Count > 0)
        //    {
        //        //遍历所有待接受的用户openID;
        //        foreach (var _openID in openidList)
        //        {
        //            //string? _wxAccessToken = await GetAccessToken();
        //            //if (_wxAccessToken != null)
        //            //{
        //            //    if (templateMsgEnum == TemplateMsgEnum.SystemWarn)
        //            //    {
        //            //        var msg = new TemplateMsg_Warn
        //            //        {
        //            //            touser = item,
        //            //            url = url,
        //            //            template_id = "cSw_KZe9Wp4FVdf7z_OcnBGHr7x_aMxsPzJD0QlGxLM",
        //            //            data = new object{
        //            //                first = new object{ value = first, color = "#173177" },
        //            //                keyword1 = new { value = "Deepl服务器异常", color = "#173177" },
        //            //                keyword2 = new { value = DateTime.Now.ToString(), color = "#173177" },
        //            //                keyword3 = new { value = earnLevel, color = "#173177" },
        //            //                remark = new { value = remark, color = "#E3170D" },
        //            //            }
        //            //        };



        //            //    }

        //            }
                    


        //        }

        //    }
        //    return -1;

        //}

    }
}
